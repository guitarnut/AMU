/*! (c)2015 sovrn Holdings, Inc. All Rights Reserved | build 21-03-2016 */
var sovrn=sovrn||{};sovrn.utils=function(){function a(){return self!==top}function b(a){var b=!0;(!a||-1===a.indexOf(".")||a.length<4||0===a.indexOf("file:")||a.indexOf("javascript:")>=0||a.indexOf("data:")>=0)&&(b=!1);try{decodeURI(a)}catch(c){b=!1}return b}function c(a){var d,e,f,g,h,i,j,k,l,m,n="";if(!a)return"";k=/^http(s)?%/i,l=decodeURIComponent,m=[q,s];try{try{for(d=["/^http(s)?://.*?adnxs.com/bounce.*referrer.*/"],g=0;g<d.length;g++)if(new RegExp(d[g]).test(a)){try{a=l(a)}catch(p){o(p)}break}}catch(t){o(t)}for(;k.test(a);)try{a=l(a)}catch(p){o(p)}for(f=0;f<m.length;f++)for(g=0;g<m[f].length;g++)if(j=m[f][g].dmn?r:"",e=new RegExp(j+m[f][g].dmn+m[f][g].pat,"i"),h=e.exec(a),h&&h.length>=1){n=l(h[h.length-1]);break}}catch(u){o(u)}return i=c(n),b(i)?i:a}function d(){var d,f=document.location.href;try{a()&&(d=e(),document.referrer&&(d=d||document.referrer)),b(d)||(d=f),d=c(d)}catch(g){o("getLoc failure",g)}return d=b(d)?d:f,"http://"+d.replace("http://","").substr(0,1024)}function e(){var a="";try{if(window.$sf)a=f().referrer;else{var b=f().location;if(b&&b.ancestorOrigins&&b.ancestorOrigins.length>1){var c=b.ancestorOrigins;a=c[c.length-1]}else b&&b.hasOwnProperty("ancestorOrigins")===!1&&(a=g())}}catch(d){o("getTopParentLoc failure",d)}return a}function f(){return document}function g(){var a,b="",c="";do{a=a?a.parent:window;try{c=a.document.referrer}catch(d){return c}}while(a!==window.top);return b}function h(a,b){try{console.log&&(b?console.log("%c"+a,"background-color: #FFDA91",b):console.log("%c"+a,"background-color: #FFDA91"))}catch(c){console.log("Unable to log message: "+c.toString)}}function i(){try{return navigator.userAgent}catch(a){p(a)}}function j(){try{return document?document.referrer:""}catch(a){return p(a),""}}function k(){var a=document.getElementsByTagName("*"),b=[],c=new RegExp(/kaltura|flow|jw|vid/i);for(var d in a){var e=d.toString().match(c);null!=e&&b.push(e[0]);try{var f=a[d].getAttribute("data");if(null!=f){var g=f.match(c);null!=g&&b.push(g[0])}}catch(h){p(h)}}return b}function l(a){h("formatting beacon uri"),h(n(window.document.body,m("iframe",{style:"height:0;width:0;display:none;",src:a,height:0,width:0,frameborder:0}))?"Beacon sent":"Beacon failed")}function m(a,b){var c=null;try{c=document.createElement(a),b&&Object.keys(b).map(function(a){c.setAttribute(a,b[a])})}catch(d){h("could not create DOM element "+a)}return c}function n(a,b){this.el=b,this.target=a;try{return this.target.appendChild(this.el),!0}catch(c){return h("failed to attach element to ",this.target+c),!1}}function o(a,b){b?console.log("JS error: "+b,a):console.log("JS error: "+a)}function p(a,b){try{}catch(a){}}var q=[{dmn:"?(apr|ap|www)?\\.lijit\\.(com|dev)",pat:'.*([?]|&)(loc)=([^"&;, ]+)'},{dmn:"?googleusercontent\\.com",pat:'.*?u=([^"&;, ]+)'},{dmn:"webcache.googleusercontent.com/search",pat:'[?]q=cache:[^:]+:([^"&;, \\+]+)'},{dmn:"?doubleclick.*?",pat:'(url|admu|click|dc_ref)=([^"&;, ]+)'},{dmn:"?yieldmanager\\.com",pat:".*?==,,([^,]+)"},{dmn:"?yieldmanager\\.com",pat:'.*?pub_url=(\\$)?([^"&;, ]+)'},{dmn:"?openx.*",pat:'([?]|&)loc=([^"&;, ]+)'},{dmn:"?admeld.com.*",pat:'?url=([^"&;, ]+)'},{dmn:"?adnxs.com.*",pat:'?referrer=([^"&;, ]+)'},{dmn:"?ro2\\.biz.*",pat:'?rf=([^"&;, ]+)'},{dmn:"?ads.micklemedia\\.com",pat:'.*?&r=([^"&;, ]+)'},{dmn:"?c\\.lqw\\.me.*?",pat:'"url":"([^"& ]+)'},{dmn:"?mb\\.zam\\.com",pat:'.*?tr=([^"&;, ]+)'},{dmn:"?rubiconproject\\.com",pat:'.*?rf=([^"&;, ]+)'},{dmn:"?moocowads\\.com",pat:'.*?url=([^"&;, ]+)'},{dmn:"?pubmatic\\.com",pat:'.*?([?]|&)(refurl|kadpageurl)=([^"&;, ]+)'},{dmn:"?tagcade\\.com",pat:'.*?([?]|&)src=([^"&;, ]+)'},{dmn:"?burstdirectads\\.com",pat:'.*?([?]|&)(pub_url|src)=([^"&;, ]+)'},{dmn:"?localpages\\.com",pat:'.*?([?]|&)(pageUrl)=([^"&;, ]+)'},{dmn:"?888media\\.net",pat:'.*?([?]|&)(page_address|uadr)=([^"&;, ]+)'}],r="^http(s)?:\\/\\/.*",s=[{dmn:"",pat:"^{(.*)}$"}];return{loc:d,player:k,agent:i,referrer:j,beacon:l,log:h}}();